const API_URL = import.meta.env.VITE_API_URL

export async function postEncodedRequest(payload, endpoint) {
    // Convert payload to URL encoded
    const urlEncodedPayload = new URLSearchParams()
    for (const [key, value] of Object.entries(payload)) {
        urlEncodedPayload.append(key, value)
    }

    const requestOptions = {
        method: 'POST',
        mode: "cors",
        headers: {'Content-Type': 'application/x-www-form-urlencoded'},
        body: urlEncodedPayload,
        credentials: 'include'
    }

    try {
        return await fetch(`${API_URL}${endpoint}`, requestOptions)
    } catch (error) {
        console.log(error)
    }
}

export async function postRequest(payload, endpoint) {
    const requestOptions = {
        method: 'POST',
        mode: "cors",
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(payload),
        credentials: 'include'
    }

    try {
        return await fetch(`${API_URL}${endpoint}`, requestOptions)
    } catch (error) {
        console.log(error)
    }
}

export async function postFileRequest(formData, endpoint) {
    const requestOptions = {
        method: 'POST',
        mode: "cors",
        body: formData,
        credentials: 'include'
    }

    try {
        return await fetch(`${API_URL}${endpoint}`, requestOptions)
    } catch (error) {
        console.log(error)
    }
}

export async function putRequest(payload, endpoint) {
    const requestOptions = {
        method: 'PUT',
        mode: "cors",
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(payload),
        credentials: 'include'
    }

    try {
        return await fetch(`${API_URL}${endpoint}`, requestOptions)
    } catch (error) {
        console.log(error)
    }
}

export async function getRequest(endpoint) {
    const requestOptions = {
        method: 'GET',
        mode: "cors",
        headers: {'Content-Type': 'application/json'},
        credentials: 'include'
    }

    try {
        return await fetch(`${API_URL}${endpoint}`, requestOptions)
    } catch (error) {
        console.log(error)
    }
}